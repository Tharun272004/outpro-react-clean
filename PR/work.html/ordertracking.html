<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Order Tracking</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to right, #283e51, #485563);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px 20px;
    margin: 0;
  }
  h2 {
    margin-bottom: 20px;
  }
  .order-info {
    background: rgba(255,255,255,0.1);
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 0 15px rgba(0,0,0,0.4);
  }
  .order-info h3 {
    margin-bottom: 10px;
    text-align: center;
  }
  .order-info p {
    margin: 8px 0;
    font-size: 16px;
  }
  .status-bar {
    width: 90%;
    max-width: 600px;
    background: rgba(255,255,255,0.1);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    margin-bottom: 20px;
  }
  .status-icon {
    font-size: 50px;
    animation: bounce 1s infinite alternate;
  }
  @keyframes bounce {
    0% { transform: translateY(0); }
    100% { transform: translateY(-10px); }
  }
  .status {
    margin-top: 15px;
    font-size: 20px;
    font-weight: bold;
    color: #00ffcc;
  }
  .progress-container {
    width: 100%;
    background: rgba(255,255,255,0.2);
    border-radius: 8px;
    height: 15px;
    margin-top: 15px;
    overflow: hidden;
  }
  .progress-bar {
    height: 15px;
    background-color: #00ffcc;
    width: 0%;
    transition: width 1s ease;
  }
  .btn {
    display: none;
    padding: 12px 20px;
    background-color: #00b894;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 15px;
    width: 90%;
    max-width: 600px;
  }
  .btn:hover {
    background-color: #019875;
  }
</style>
</head>
<body>

<h2>Your Order Status</h2>

<!-- Order Info Panel -->
<div class="order-info">
  <h3>Order Details</h3>
  <p><strong>Delivery Address:</strong> <span id="deliveryAddress">Loading...</span></p>
  <p><strong>Nearest Shop:</strong> <span id="shopName">Loading...</span></p>
  <p><strong>Estimated Delivery:</strong> <span id="estimatedTime">Loading...</span></p>
</div>

<div class="status-bar">
  <div id="icon" class="status-icon">‚è≥</div>
  <p id="status">Initializing...</p>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
</div>

<button class="btn" id="feedbackBtn" onclick="redirectToFeedback()">Give Feedback</button>
<button class="btn" id="homeBtn" onclick="redirectToHome()">Back to Home</button>

<script>
  // Load order details from localStorage
  const address = localStorage.getItem("orderAddress") || "Not Provided";
  const shops = [
    "Xerox Hub", "Fast Print", "Copy World", "Print Express",
    "Copy Pro", "Docu Center", "Quick Prints", "Copy King"
  ];
  const selectedShop = shops[Math.floor(Math.random() * shops.length)];
  localStorage.setItem("nearestShop", selectedShop);

  const deliveryTime = localStorage.getItem("deliveryTime") || "30 mins";

  document.getElementById("deliveryAddress").textContent = address;
  document.getElementById("shopName").textContent = selectedShop;
  document.getElementById("estimatedTime").textContent = deliveryTime;

  // Status progress
  const statuses = [
    { text: "Processing", icon: "‚è≥" },
    { text: "Printing", icon: "üñ®Ô∏è" },
    { text: "Packed", icon: "üì¶" },
    { text: "Shipped", icon: "üöö" },
    { text: "Out for Delivery", icon: "üèçÔ∏è" },
    { text: "Delivered", icon: "‚úîÔ∏è" }
  ];

  const progressBar = document.getElementById("progressBar");
  const feedbackBtn = document.getElementById("feedbackBtn");
  const homeBtn = document.getElementById("homeBtn");
  const statusText = document.getElementById("status");
  const iconElement = document.getElementById("icon");

  let stepIndex = 0;
  const totalSteps = statuses.length;
  const intervalTime = 3000;

  function startProgress() {
    const interval = setInterval(() => {
      if (stepIndex < totalSteps) {
        statusText.innerText = statuses[stepIndex].text;
        iconElement.innerText = statuses[stepIndex].icon;

        const progressPercent = ((stepIndex + 1) / totalSteps) * 100;
        progressBar.style.width = progressPercent + "%";

        stepIndex++;
      } else {
        clearInterval(interval);
        feedbackBtn.style.display = "inline-block";
        homeBtn.style.display = "inline-block"; // show home button
      }
    }, intervalTime);
  }

  startProgress();

  function redirectToFeedback() {
    window.location.href = "feedback.html";
  }

  function redirectToHome() {
    window.location.href = "home.html";
  }
</script>

</body>
</html>
